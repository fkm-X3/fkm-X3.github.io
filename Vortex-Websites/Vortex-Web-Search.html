<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vortex Search</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkBg: '#1a1a1a',
                        darkCard: '#2d2d2d'
                    }
                }
            }
        }
    </script>

    <script async src="https://cse.google.com/cse.js?cx=239aa370773134077"></script>

    <script src="../Javascript_folder/tailwind-script.js"></script>
    <link rel="stylesheet" href="../Css/styles.css">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1086/1086933.png">

    <style>

        .gsc-search-box {
            display: none !important;
        }

        .gsc-control-cse {
            padding: 0 !important;
            border: none !important;
            background-color: transparent !important;
            font-family: inherit !important;
        }

        .gsc-webResult.gsc-result {
            background-color: transparent !important;
            padding: 1rem 0 !important;
            border-bottom: 1px solid #e5e7eb !important;
        }

        .gsc-adBlock {
            opacity: 0.7;
        }

        .gs-title {
            font-family: inherit !important;
            text-decoration: none !important;
        }
        .gs-snippet {
            font-family: inherit !important;
            line-height: 1.6 !important;
        }

        html.dark .gsc-webResult.gsc-result {
            border-bottom: 1px solid #374151 !important;
        }

        html.dark .gs-title {
            color: #60a5fa !important; 
        }

        html.dark .gs-title b {
            color: #60a5fa !important;
        }

        html.dark .gs-snippet {
            color: #9ca3af !important; 
        }

        html.dark .gs-visibleUrl {
            color: #d1d5db !important; 
        }

        html.dark .gsc-cursor-page {
            color: #60a5fa !important;
        }

        .gsc-branding {
            display: none !important;
        }

        .gsc-cursor-box {
            margin-top: 20px;
            text-align: left;
        }
    </style>
</head>
<body class="bg-white text-gray-800 dark:bg-darkBg dark:text-gray-200 transition-colors duration-300 min-h-screen flex flex-col font-sans">

    <nav class="flex justify-between items-center p-4 sticky top-0 z-50 bg-white/95 dark:bg-darkBg/95 backdrop-blur-sm border-b border-transparent transition-colors" id="navbar">
        <div class="flex items-center gap-6 w-full">

            <div id="nav-logo" class="hidden cursor-pointer flex items-center gap-2" onclick="goHome()">
                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg">V</div>
                <span class="font-semibold text-xl tracking-tight">Vortex</span>
            </div>

            <div id="nav-search-container" class="hidden flex-grow max-w-2xl group">
                <div class="relative flex items-center w-full">
                    <input type="text" id="nav-search-input" 
                        class="w-full py-2.5 pl-5 pr-10 rounded-full border border-gray-200 dark:border-gray-700 bg-white dark:bg-darkCard shadow-sm hover:shadow-md focus:shadow-md focus:outline-none focus:border-blue-500 dark:focus:border-blue-500 transition-all"
                        placeholder="Search the web..."
                    >
                    <button class="absolute right-3 p-2 text-blue-600 hover:text-blue-700" onclick="performSearchFromNav()">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                    <button class="absolute right-12 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200" onclick="clearSearch()">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="flex items-center gap-3 ml-auto">
                <button onclick="toggleTheme()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Toggle Dark Mode">

                    <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden dark:block text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>

                    <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 block dark:hidden text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                </button>
                <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-purple-500 to-blue-500 flex items-center justify-center text-white font-bold text-sm cursor-pointer hover:opacity-90">
                    U
                </div>
            </div>
        </div>
    </nav>

    <main id="home-view" class="flex-grow flex flex-col items-center justify-center px-4 -mt-16 animate-fade-in">

        <div class="flex flex-col items-center mb-8">
            <div class="text-6xl md:text-8xl font-bold tracking-tighter text-gray-800 dark:text-white mb-2">
                <span class="text-blue-600">V</span>ortex
            </div>
            <p class="text-gray-500 dark:text-gray-400 text-lg">Explore the infinite.</p>
        </div>

        <div class="w-full max-w-xl">
            <div class="relative group">
                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <svg class="h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                </div>
                <input type="text" id="home-search-input" 
                    class="block w-full pl-12 pr-4 py-4 rounded-full border border-gray-200 dark:border-gray-700 bg-white dark:bg-darkCard text-lg shadow-sm hover:shadow-md focus:shadow-lg focus:outline-none focus:ring-0 transition-shadow duration-200"
                    placeholder="Search everything..."
                    autocomplete="off"
                >

                <div class="absolute inset-y-0 right-0 pr-4 flex items-center cursor-pointer hover:opacity-80" title="Voice Search">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                    </svg>
                </div>
            </div>

            <div class="flex justify-center gap-3 mt-8">
                <button onclick="performSearchFromHome()" class="px-6 py-2 bg-gray-100 dark:bg-darkCard text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 hover:shadow border border-transparent focus:outline-none transition-all text-sm font-medium">
                    Vortex Search
                </button>
                <button onclick="imFeelingLucky()" class="px-6 py-2 bg-gray-100 dark:bg-darkCard text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 hover:shadow border border-transparent focus:outline-none transition-all text-sm font-medium">
                    I'm Feeling Lucky
                </button>
            </div>
        </div>

        <div class="fixed bottom-0 w-full bg-gray-100 dark:bg-darkCard py-3 px-6 text-sm text-gray-500 dark:text-gray-400 flex flex-col md:flex-row justify-between items-center">
            <div class="mb-2 md:mb-0">Unknown Location â€¢ From your IP</div>
            <div class="flex gap-6">
                <a href="#" class="hover:underline">About</a>
                <a href="#" class="hover:underline">Privacy</a>
                <a href="#" class="hover:underline">Terms</a>
                <a href="#" class="hover:underline">Settings</a>
            </div>
        </div>
    </main>

    <div id="results-view" class="hidden flex-grow flex flex-col animate-fade-in">

        <div class="px-4 md:px-[160px] border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-darkBg">
            <div class="flex gap-6 text-sm text-gray-600 dark:text-gray-400 overflow-x-auto no-scrollbar">
                <button class="py-3 border-b-4 border-blue-600 text-blue-600 font-medium whitespace-nowrap">All</button>
                <button class="py-3 border-b-4 border-transparent hover:text-blue-600 whitespace-nowrap transition-colors">Images</button>
                <button class="py-3 border-b-4 border-transparent hover:text-blue-600 whitespace-nowrap transition-colors">Videos</button>
                <button class="py-3 border-b-4 border-transparent hover:text-blue-600 whitespace-nowrap transition-colors">News</button>
                <button class="py-3 border-b-4 border-transparent hover:text-blue-600 whitespace-nowrap transition-colors">Maps</button>
                <button class="py-3 border-b-4 border-transparent hover:text-blue-600 whitespace-nowrap transition-colors">More</button>
            </div>
        </div>

        <div class="flex flex-col lg:flex-row px-4 md:px-[160px] gap-10 pb-10 pt-6">

            <div class="flex-1 max-w-3xl" id="results-container">

                <div class="gcse-search" data-gname="vortexSearch" data-enableHistory="true"></div>
            </div>

        </div>
    </div>

    <script>
        let isDarkMode = false;

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            const html = document.documentElement;
            if (isDarkMode) {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            } else {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            }
        }

        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            isDarkMode = true;
            document.documentElement.classList.add('dark');
        }

        function goHome() {
            document.getElementById('home-search-input').value = '';
            document.getElementById('nav-search-input').value = '';

            document.getElementById('home-view').classList.remove('hidden');
            document.getElementById('results-view').classList.add('hidden');

            document.getElementById('nav-logo').classList.add('hidden');
            document.getElementById('nav-search-container').classList.add('hidden');
            document.getElementById('navbar').classList.remove('border-b', 'border-gray-200', 'dark:border-gray-700', 'shadow-sm');
        }

        function goResults(query) {
            if (!query.trim()) return;

            document.getElementById('home-search-input').value = query;
            document.getElementById('nav-search-input').value = query;

            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('results-view').classList.remove('hidden');

            document.getElementById('nav-logo').classList.remove('hidden');
            document.getElementById('nav-search-container').classList.remove('hidden');
            document.getElementById('navbar').classList.add('border-b', 'border-gray-200', 'dark:border-gray-700', 'shadow-sm');

            renderResults(query);
        }

        function performSearchFromHome() {
            const query = document.getElementById('home-search-input').value;
            goResults(query);
        }

        function performSearchFromNav() {
            const query = document.getElementById('nav-search-input').value;
            goResults(query);
        }

        function imFeelingLucky() {
            const query = document.getElementById('home-search-input').value;
            if(!query) {
                window.location.href = "https://www.google.com/doodles"; 
                return;
            }
            goResults(query);
        }

        function clearSearch() {
             document.getElementById('nav-search-input').value = '';
             document.getElementById('nav-search-input').focus();
        }

        document.getElementById('home-search-input').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') performSearchFromHome();
        });

        document.getElementById('nav-search-input').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') performSearchFromNav();
        });

        function renderResults(query) {

            const checkGoogle = setInterval(() => {
                if (window.google && google.search && google.search.cse && google.search.cse.element) {
                    clearInterval(checkGoogle);
                    const element = google.search.cse.element.getElement('vortexSearch');
                    if (element) {
                        element.execute(query);
                    } else {
                        console.error("Google Search Element not found yet.");
                    }
                }
            }, 100);

            setTimeout(() => clearInterval(checkGoogle), 5000);
        }
    </script>
</body>
</html>